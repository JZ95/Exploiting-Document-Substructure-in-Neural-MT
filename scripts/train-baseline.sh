#!/bin/sh
source ./vars
script_dir=`dirname $0`
src_dir=$script_dir/../src
model_dir=$script_dir/models

CUDA_VISIBLE_DEVICES=0,1 $src_dir/train.py \
    --mode baseline-nmt \
    --batch_size 300 \
    --model $ckpt_dir/baseline-nmt \
    --reload $ckpt_dir/baseline-nmt.best-valid \
    --dictionaries $model_dir/vocab.zh.json $model_dir/vocab.en.json \
    --datasets $data_dir/corpus.bpe.zh $data_dir/corpus.bpe.en \
    --valid_datasets $data_dir/dev.bpe.zh $data_dir/dev.bpe.en \
    --valid_script ./valid-baseline-nmt.sh \
    --valid_batch_size 80 \
    --valid_freq 20000 \
    --disp_freq 1000 \
    --sample_freq 40000 \
    --save_freq 20000 \
    --embedding_size 500 \
    --maxlen_word 60 \
    --word_rnn_enc_transition_depth 2 \
    --word_rnn_state_size 512 \
    --tie_decoder_embeddings \
    --rnn_layer_normalisation
