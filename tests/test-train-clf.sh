#!/bin/sh
# test network in CLF mode
if [ ! -d ./tmp ]; then
    mkdir -p ./tmp
fi

test_dir=`dirname $0`
src_dir=$test_dir/../src
$src_dir/train.py \
    --mode clf \
    --batch_size 10 \
    --model ./tmp/clf \
    --dictionaries ./data/vocab.zh.json ./data/cls_2_id.json \
    --datasets ./data/clf-data.text ./data/clf-data.label \
    --valid_datasets ./data/clf-valid.text ./data/clf-valid.label \
    --disp_freq 10 \
    --valid_freq 50 \
    --embedding_size 250 \
    --source_vocab_sizes 5000 \
    --maxlen-sent 50 \
    --maxlen-word 50 \
    --word_rnn_enc_depth 2 \
    --word_rnn_state_size 50 \
    --sent_rnn_state_size 25 \
    --sec_repr_size 50 \
    --rnn_layer_normalisation
